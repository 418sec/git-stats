#!/usr/bin/env node

// Dependencies
var GitStats = require("../lib")
  , Fs = require("fs")
  , AnsiParser = require("ansi-parser")
  , Couleurs = require("couleurs")()
  ;

const SQUARES = {
    "⬚": Couleurs.fg("⬚", "#eee")
  , "▢": Couleurs.fg("▢", "#eee")
  , "▤": Couleurs.fg("▤", "#8cc665")
  , "▣": Couleurs.fg("▣", "#44a340")
  , "⬛": Couleurs.fg("▣", "#1e6823")
};

// CLI options
switch (process.argv[2]) {
    case "--record":
        var data = process.argv[3].replace(/^\"|\"$/g, "");
        try {
            data = JSON.parse(data);
        } catch (e) {
            throw e;
        }
        GitStats.record(data, function (err) {
            if (err) { throw err; }
        });
        break;
    case "--help":
        console.log(Fs.readFileSync("./docs/help"));
        break;
    case "-v":
        console.log(require("../package.json").version);
        break;
    default:
        GitStats.ansiCalendar(function (err, data) {
            console.log(err || data);
            if (process.argv.indexOf("--no-ansi") !== -1) {

            }
        });
        break;
}
